
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Future Self Intervention</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@300;400;500;600;700&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: 'Inter', sans-serif; 
            background: linear-gradient(135deg, #e8e8ea 0%, #d4d4d8 20%, #e4d5e0 60%, #f0e6ef 100%);
            min-height: 100vh;
            position: relative;
            overflow-x: hidden;
        }
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at 20% 30%, rgba(216, 180, 216, 0.15) 0%, transparent 50%),
                        radial-gradient(circle at 80% 70%, rgba(255, 192, 203, 0.12) 0%, transparent 50%);
            pointer-events: none;
            z-index: 0;
        }
        .font-serif { font-family: 'Cormorant Garamond', serif; }
        .glass-card {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.4);
            box-shadow: 0 8px 32px rgba(31, 38, 135, 0.15);
        }
        .glass-card-dark {
            background: rgba(100, 100, 120, 0.25);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 8px 32px rgba(31, 38, 135, 0.2);
        }
        .fade-in { animation: fadeIn 1.2s ease-out forwards; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }
        .slide-up { animation: slideUp 0.8s ease-out forwards; }
        @keyframes slideUp { from { opacity: 0; transform: translateY(40px); } to { opacity: 1; transform: translateY(0); } }
        .glow-orb {
            width: 160px;
            height: 160px;
            background: radial-gradient(circle, rgba(216, 180, 216, 0.6) 0%, rgba(255, 192, 203, 0.3) 50%, transparent 70%);
            border-radius: 50%;
            animation: pulse 4s ease-in-out infinite;
            filter: blur(40px);
        }
        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 0.6; }
            50% { transform: scale(1.2); opacity: 0.8; }
        }
        .breathing-circle {
            width: 180px;
            height: 180px;
            border: 2px solid rgba(216, 180, 216, 0.5);
            animation: breathe 6s infinite ease-in-out;
        }
        @keyframes breathe {
            0%, 100% { transform: scale(1); opacity: 0.6; }
            50% { transform: scale(1.15); opacity: 1; }
        }
        .luxury-button {
            background: linear-gradient(135deg, #d8b4d8 0%, #dda0dd 100%);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }
        .luxury-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transition: left 0.6s;
        }
        .luxury-button:hover::before { left: 100%; }
        .luxury-button:hover { transform: translateY(-2px); box-shadow: 0 12px 40px rgba(216, 180, 216, 0.4); }
        .luxury-button-secondary {
            background: rgba(255, 255, 255, 0.5);
            backdrop-filter: blur(10px);
            border: 1.5px solid rgba(216, 180, 216, 0.4);
            transition: all 0.3s ease;
        }
        .luxury-button-secondary:hover {
            background: rgba(255, 255, 255, 0.7);
            border-color: rgba(216, 180, 216, 0.6);
            transform: translateY(-2px);
        }
        .luxury-input {
            background: rgba(255, 255, 255, 0.6);
            backdrop-filter: blur(10px);
            border: 1.5px solid rgba(216, 180, 216, 0.3);
            transition: all 0.3s ease;
        }
        .luxury-input:focus {
            background: rgba(255, 255, 255, 0.8);
            border-color: rgba(216, 180, 216, 0.6);
            outline: none;
            box-shadow: 0 4px 20px rgba(216, 180, 216, 0.2);
        }
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 64px;
            height: 36px;
        }
        .toggle-switch input { opacity: 0; width: 0; height: 0; }
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(216, 180, 216, 0.3);
            transition: .4s;
            border-radius: 36px;
            border: 1.5px solid rgba(216, 180, 216, 0.4);
        }
        .slider:before {
            position: absolute;
            content: "";
            height: 26px;
            width: 26px;
            left: 4px;
            bottom: 3px;
            background: white;
            transition: .4s;
            border-radius: 50%;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
        }
        input:checked + .slider { background: linear-gradient(135deg, #d8b4d8 0%, #dda0dd 100%); }
        input:checked + .slider:before { transform: translateX(28px); }
        .floating { animation: floating 3s ease-in-out infinite; }
        @keyframes floating {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        #app { position: relative; z-index: 1; }
        .gradient-text {
            background: linear-gradient(135deg, #6b4c6b 0%, #9b6b9b 50%, #d8b4d8 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .text-shadow-soft { text-shadow: 0 2px 20px rgba(107, 76, 107, 0.15); }
        .insight-card-enter { animation: cardEnter 0.8s ease-out forwards; }
        @keyframes cardEnter {
            from { opacity: 0; transform: translateY(30px) scale(0.95); }
            to { opacity: 1; transform: translateY(0) scale(1); }
        }
        .insight-text-reveal { animation: textReveal 1.2s ease-out forwards; }
        @keyframes textReveal {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body>
<div id="app" class="max-w-5xl mx-auto p-6 min-h-screen"></div>

<script>
const sanctuaryTool = {
    currentScreen: 'welcome',
    sessionData: {},
    insights: null,
    artefact: null,
    insightMode: 'gentle',
    currentInsightIndex: 0, // Track which insight we're showing
    screens: ['welcome', 'context', 'primary', 'secondary', 'sanctuary', 'insights', 'artefact', 'companionship', 'return'],
    
    // Insight categories for sequential display
    insightCategories: [
        { key: 'subsurface', title: 'What might really be underneath', gentle: 'What might really be going on underneath', strategic: 'Subsurface Pattern' },
        { key: 'tension', title: 'The tension you\'re standing inside', gentle: 'The tension you\'re standing inside', strategic: 'Core Tension' },
        { key: 'leverage', title: 'Where a small shift could help most', gentle: 'Where a small shift could help most', strategic: 'Leverage Point' },
        { key: 'future', title: 'Who you are becoming through this', gentle: 'Who you are becoming through this', strategic: 'Evolving Identity' },
        { key: 'strengths', title: 'Something you already have', gentle: 'Something you already have', strategic: 'Strengths to Amplify' },
        { key: 'release', title: 'Something you don\'t need to carry alone', gentle: 'Something you don\'t need to carry alone', strategic: 'Patterns to Release' }
    ],
    
    reflections: [
        "You've named something that matters. Before we make sense of it, let's pause.",
        "Nothing needs to be solved here. Let what you named settle.",
        "The space between naming and understanding is where wisdom grows.",
        "Breathe. You don't have to figure everything out right now.",
        "What feels heavy deserves to be held gently before it's understood."
    ],

    generateInsights(data, mode = 'gentle') {
        const text = data.primary?.toLowerCase() || '';
        const isTeamRelated = text.includes('team') || text.includes('collaborat') || text.includes('together');
        const isGrowthRelated = text.includes('growth') || text.includes('scale') || text.includes('expand');
        const isResourceRelated = text.includes('resource') || text.includes('budget') || text.includes('money');
        
        if (mode === 'gentle') {
            let subsurface = "Often, when something feels stuck on the surface, it's because different parts of life are pulling in different directions at the same time.";
            let tension = "Stability ↔ Possibility";
            let leverage = "This might not be about working harder, but finding the smallest place where change would make everything else feel lighter.";
            let future = "You're learning how to lead through difficulty — which builds a kind of wisdom that can't be taught.";
            let strengths = "You have care, commitment, and skill. The issue is rarely about capability.";
            let release = "Some weights were never meant to be held by one person. Blame, urgency, or the belief that this struggle defines your worth.";
            
            if (isTeamRelated) {
                subsurface = "When working together feels hard, it's often because people are trying to care for different things at the same time.";
                tension = "Belonging ↔ Boundaries";
                leverage = "Sometimes one clear, kind conversation can change how everything feels together.";
                strengths = "You care about connection. That's a strength, not a weakness.";
            }
            
            if (isGrowthRelated) {
                subsurface = "Growth asks us to become someone new while still being who we are. That tension is real.";
                tension = "Safety ↔ Expansion";
                leverage = "One small, true step forward often matters more than a big perfect plan.";
                strengths = "You're willing to grow. That takes courage every day.";
            }
            
            if (isResourceRelated) {
                subsurface = "You're trying to create value in a world where resources feel limited. That's not personal failure — it's a mismatch between effort and support.";
                tension = "Necessity ↔ Creativity";
                leverage = "This might not be about 'more' but about finding one way to reach people who already value what you offer.";
                strengths = "You know how to make things work. That's a quiet superpower.";
            }
            
            return { subsurface, tension, leverage, future, strengths, release };
        } else {
            let subsurface = "Executive challenges often reveal structural misalignments between intention, capacity, and system design.";
            let tension = "Operational Excellence ↔ Strategic Transformation";
            let leverage = "Identify the highest-leverage intervention point where minimal energy creates maximal system-wide shift.";
            let future = "Evolving from operator to orchestrator — designing systems that generate value beyond direct intervention.";
            let strengths = "Systems awareness, strategic patience, capacity for complexity";
            let release = "The heroic leadership model — the belief that you must personally solve every systemic challenge.";
            
            if (isTeamRelated) {
                subsurface = "Team dynamics surface misconfigured feedback loops and unclear accountability structures.";
                tension = "Psychological Safety ↔ Performance Accountability";
                leverage = "Redesign decision rights and information flows to match strategic priorities.";
            }
            
            if (isGrowthRelated) {
                subsurface = "Growth plateaus often indicate capability-inertia gaps in the organizational learning system.";
                tension = "Exploitation of Current Assets ↔ Exploration of New Capabilities";
                leverage = "Create protected space for experimental learning while maintaining core operational integrity.";
            }
            
            if (isResourceRelated) {
                subsurface = "Resource constraints expose misaligned value capture mechanisms in the business model.";
                tension = "Resource Efficiency ↔ Strategic Investment";
                leverage = "Reconfigure value streams to better align effort, value creation, and compensation.";
            }
            
            return { subsurface, tension, leverage, future, strengths, release };
        }
    },

    generateArtefact(data, insights) {
        const truths = [
            "You are not failing — you are navigating without support.",
            "What feels like resistance is often growth in disguise.",
            "The wisdom you need is already within you, waiting to be heard.",
            "Complexity is not your enemy — it's the raw material of your leadership.",
            "You don't have to carry this alone."
        ];
        
        const commitments = [
            "I will lead from curiosity, not certainty.",
            "I will trust my own pace and process.",
            "I will listen to what wants to emerge, not just what I want to happen.",
            "I will release the need to have all the answers.",
            "I will honor both action and stillness as forms of leadership."
        ];
        
        return {
            sentenceOfTruth: truths[Math.floor(Math.random() * truths.length)],
            patternToRelease: insights.release,
            strengthToKeep: insights.strengths,
            gentleCommitment: commitments[Math.floor(Math.random() * commitments.length)],
            date: new Date().toLocaleDateString('en-US', { 
                weekday: 'long', 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
            })
        };
    },

    nextScreen() {
        const i = this.screens.indexOf(this.currentScreen);
        if (i < this.screens.length - 1) {
            if (this.currentScreen === 'secondary') {
                this.insights = this.generateInsights(this.sessionData, this.insightMode);
                this.currentInsightIndex = 0; // Reset to first insight
            } else if (this.currentScreen === 'insights') {
                // Only go to artefact if we've seen all insights
                if (this.currentInsightIndex >= this.insightCategories.length - 1) {
                    this.artefact = this.generateArtefact(this.sessionData, this.insights);
                    this.currentScreen = this.screens[this.screens.indexOf('insights') + 1];
                } else {
                    // Show next insight
                    this.currentInsightIndex++;
                }
                this.render();
                return;
            }
            this.currentScreen = this.screens[i + 1];
            this.render();
        }
    },

    prevScreen() {
        const i = this.screens.indexOf(this.currentScreen);
        if (i > 0) {
            if (this.currentScreen === 'insights' && this.currentInsightIndex > 0) {
                // Go to previous insight
                this.currentInsightIndex--;
                this.render();
                return;
            }
            this.currentScreen = this.screens[i - 1];
            this.render();
        }
    },

    toggleInsightMode() {
        this.insightMode = this.insightMode === 'gentle' ? 'strategic' : 'gentle';
        this.insights = this.generateInsights(this.sessionData, this.insightMode);
        this.currentInsightIndex = 0; // Reset to first insight when toggling
        this.render();
    },

    // Keep Claude's beautiful welcome screen
    renderWelcome() {
        return `
        <div class="min-h-screen flex flex-col justify-center items-center fade-in py-12">
            <div class="text-center max-w-3xl px-6">
                <div class="relative mb-12">
                    <div class="glow-orb mx-auto absolute left-1/2 -translate-x-1/2"></div>
                    <div class="breathing-circle mx-auto rounded-full flex items-center justify-center relative z-10 glass-card-dark">
                        <i class="fas fa-spa text-5xl text-purple-200 floating"></i>
                    </div>
                </div>
                <h1 class="text-6xl md:text-7xl font-serif font-light mb-6 gradient-text text-shadow-soft">
                    Future Self
                </h1>
                <h2 class="text-3xl md:text-4xl font-serif font-light mb-10 text-gray-600">
                    Intervention
                </h2>
                <p class="text-xl md:text-2xl text-gray-600 mb-12 leading-relaxed font-light px-4">
                    A sanctuary to name what feels heavy,<br class="hidden md:block">
                    and discover the wisdom already within you.
                </p>
                <button onclick="sanctuaryTool.nextScreen()"
                    class="luxury-button px-14 py-5 text-white text-xl font-medium rounded-full shadow-xl relative">
                    Begin Your Journey
                </button>
                <div class="mt-12 flex items-center justify-center gap-8 text-gray-500 text-sm">
                    <div class="flex items-center gap-2">
                        <i class="fas fa-clock"></i>
                        <span>7 minutes</span>
                    </div>
                    <div class="w-1 h-1 rounded-full bg-gray-400"></div>
                    <div class="flex items-center gap-2">
                        <i class="fas fa-lock"></i>
                        <span>Private & Confidential</span>
                    </div>
                </div>
            </div>
        </div>`;
    },

    // Keep Claude's context screen
    renderContext() {
        const sector = this.sessionData.sector || '';
        const role = this.sessionData.role || '';
        
        return `
        <div class="slide-up py-12 px-4">
            <div class="max-w-2xl mx-auto">
                <div class="mb-12 text-center">
                    <div class="inline-block px-6 py-2 glass-card rounded-full mb-6">
                        <span class="text-purple-400 text-sm font-medium">Step 1 of 7</span>
                    </div>
                    <h1 class="text-4xl md:text-5xl font-serif font-light mb-4 gradient-text">Understanding Your Landscape</h1>
                    <p class="text-gray-600 text-lg font-light">Help us understand the world you're navigating</p>
                </div>
                <div class="glass-card rounded-3xl p-10 space-y-8">
                    <div>
                        <label class="block text-sm font-medium text-gray-600 mb-3 uppercase tracking-wide">Sector / Work Context</label>
                        <input type="text" id="sector" value="${sector}"
                            class="luxury-input w-full px-6 py-4 rounded-2xl text-lg"
                            placeholder="E.g., Technology, Healthcare, Finance...">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-600 mb-3 uppercase tracking-wide">What You're Carrying Responsibility For</label>
                        <input type="text" id="role" value="${role}"
                            class="luxury-input w-full px-6 py-4 rounded-2xl text-lg"
                            placeholder="Your role, position, or area of responsibility...">
                    </div>
                </div>
                <div class="flex gap-4 mt-10">
                    <button onclick="sanctuaryTool.prevScreen()" class="luxury-button-secondary px-8 py-4 rounded-2xl flex-1 font-medium text-gray-700">Back</button>
                    <button onclick="sanctuaryTool.saveContext()" class="luxury-button px-8 py-4 text-white font-medium rounded-2xl flex-1">Continue</button>
                </div>
            </div>
        </div>`;
    },

    saveContext() {
        const sector = document.getElementById('sector').value;
        const role = document.getElementById('role').value;
        
        if (!sector.trim() || !role.trim()) {
            alert('Please share a little about your context so we can understand your landscape.');
            return;
        }
        
        this.sessionData.sector = sector;
        this.sessionData.role = role;
        this.nextScreen();
    },

    renderPrimary() {
        const value = this.sessionData.primary || '';
        
        return `
        <div class="slide-up py-12 px-4">
            <div class="max-w-2xl mx-auto">
                <div class="mb-12 text-center">
                    <div class="inline-block px-6 py-2 glass-card rounded-full mb-6">
                        <span class="text-purple-400 text-sm font-medium">Step 2 of 7</span>
                    </div>
                    <h1 class="text-4xl md:text-5xl font-serif font-light mb-4 gradient-text">What Feels Heavy?</h1>
                    <p class="text-gray-600 text-lg font-light">Say it in your own words. This is not a performance.</p>
                </div>
                <div class="glass-card rounded-3xl p-10">
                    <textarea id="primary" rows="7" class="luxury-input w-full px-6 py-5 rounded-2xl text-lg resize-none" placeholder="What's weighing on you? What feels difficult or stuck?">${value}</textarea>
                    <div class="mt-4 flex justify-between items-center text-sm text-gray-500">
                        <span class="font-light">Just say it like you'd tell a trusted advisor</span>
                        <span id="charCount" class="font-medium">${value.length}</span>
                    </div>
                </div>
                <div class="flex gap-4 mt-10">
                    <button onclick="sanctuaryTool.prevScreen()" class="luxury-button-secondary px-8 py-4 rounded-2xl flex-1 font-medium text-gray-700">Back</button>
                    <button onclick="sanctuaryTool.savePrimary()" class="luxury-button px-8 py-4 text-white font-medium rounded-2xl flex-1">Continue</button>
                </div>
            </div>
        </div>`;
    },

    savePrimary() {
        const text = document.getElementById('primary').value;
        if (text.length < 10) {
            alert("Please share a little more so we can understand what you're carrying.");
            return;
        }
        this.sessionData.primary = text;
        this.nextScreen();
    },

    renderSecondary() {
        const value = this.sessionData.secondary || '';
        
        return `
        <div class="slide-up py-12 px-4">
            <div class="max-w-2xl mx-auto">
                <div class="mb-12 text-center">
                    <div class="inline-block px-6 py-2 glass-card rounded-full mb-6">
                        <span class="text-purple-400 text-sm font-medium">Step 3 of 7</span>
                    </div>
                    <h1 class="text-4xl md:text-5xl font-serif font-light mb-4 gradient-text">What Makes This Harder?</h1>
                    <p class="text-gray-600 text-lg font-light">What adds complexity or weight to this challenge?</p>
                </div>
                <div class="glass-card rounded-3xl p-10">
                    <textarea id="secondary" rows="7" class="luxury-input w-full px-6 py-5 rounded-2xl text-lg resize-none" placeholder="What else is happening? What compounds the difficulty?">${value}</textarea>
                    <div class="mt-4 flex justify-between items-center text-sm text-gray-500">
                        <span class="font-light">What else should we understand?</span>
                        <span id="charCount2" class="font-medium">${value.length}</span>
                    </div>
                </div>
                <div class="flex gap-4 mt-10">
                    <button onclick="sanctuaryTool.prevScreen()" class="luxury-button-secondary px-8 py-4 rounded-2xl flex-1 font-medium text-gray-700">Back</button>
                    <button onclick="sanctuaryTool.saveSecondary()" class="luxury-button px-8 py-4 text-white font-medium rounded-2xl flex-1">Enter Sanctuary</button>
                </div>
            </div>
        </div>`;
    },

    saveSecondary() {
        const text = document.getElementById('secondary').value;
        this.sessionData.secondary = text;
        this.nextScreen();
    },

    renderSanctuary() {
        const reflection = this.reflections[Math.floor(Math.random() * this.reflections.length)];
        
        return `
        <div class="fade-in min-h-screen flex flex-col justify-center items-center py-12 px-4">
            <div class="text-center max-w-2xl">
                <div class="relative mb-12">
                    <div class="glow-orb mx-auto absolute left-1/2 -translate-x-1/2"></div>
                    <div class="breathing-circle mx-auto rounded-full flex items-center justify-center relative z-10 glass-card-dark">
                        <i class="fas fa-feather text-5xl text-purple-200 floating"></i>
                    </div>
                </div>
                <h1 class="text-5xl font-serif font-light mb-12 gradient-text">Sanctuary</h1>
                <div class="glass-card p-12 rounded-3xl mb-10">
                    <p class="text-2xl md:text-3xl text-gray-700 font-serif italic leading-relaxed mb-10">"${reflection}"</p>
                    <div class="flex items-center justify-center space-x-4 text-purple-400">
                        <div class="w-2 h-2 bg-purple-300 rounded-full animate-pulse"></div>
                        <span class="font-light text-gray-600">Breathe</span>
                        <div class="w-2 h-2 bg-purple-300 rounded-full animate-pulse" style="animation-delay: 0.5s"></div>
                    </div>
                </div>
                <p class="text-gray-600 mb-12 max-w-md mx-auto font-light text-lg">You've named what matters. Before we make sense of it, let's pause.</p>
                <div class="flex gap-4 justify-center flex-wrap">
                    <button onclick="sanctuaryTool.prevScreen()" class="luxury-button-secondary px-8 py-4 rounded-2xl font-medium text-gray-700">Back</button>
                    <button onclick="sanctuaryTool.nextScreen()" class="luxury-button px-10 py-4 text-white font-medium rounded-2xl">Receive Understanding</button>
                </div>
            </div>
        </div>`;
    },

    // NEW: Single insight at a time
    renderInsights() {
        if (!this.insights) {
            this.insights = this.generateInsights(this.sessionData, this.insightMode);
        }
        
        const isGentle = this.insightMode === 'gentle';
        const currentCategory = this.insightCategories[this.currentInsightIndex];
        const insightText = this.insights[currentCategory.key];
        const isLastInsight = this.currentInsightIndex >= this.insightCategories.length - 1;
        
        return `
        <div class="fade-in py-12 px-4">
            <div class="max-w-3xl mx-auto">
                <!-- Progress indicator -->
                <div class="text-center mb-10">
                    <div class="inline-block px-6 py-2 glass-card rounded-full mb-6">
                        <span class="text-purple-400 text-sm font-medium">Insight ${this.currentInsightIndex + 1} of ${this.insightCategories.length}</span>
                    </div>
                    
                    <!-- Toggle switch -->
                    <div class="flex items-center justify-center gap-4 mb-8">
                        <span class="text-sm ${isGentle ? 'font-semibold text-purple-600' : 'text-gray-500'}">Gentle</span>
                        <label class="toggle-switch">
                            <input type="checkbox" ${this.insightMode === 'strategic' ? 'checked' : ''} onchange="sanctuaryTool.toggleInsightMode()">
                            <span class="slider"></span>
                        </label>
                        <span class="text-sm ${!isGentle ? 'font-semibold text-purple-600' : 'text-gray-500'}">Strategic</span>
                    </div>
                </div>
                
                <!-- Single Insight Card -->
                <div class="insight-card-enter">
                    <div class="glass-card p-10 md:p-12 rounded-3xl mb-8 text-center">
                        <div class="text-purple-400 text-sm font-medium mb-6 tracking-wider">
                            ${isGentle ? currentCategory.gentle : currentCategory.strategic}
                        </div>
                        
                        <div class="insight-text-reveal">
                            ${currentCategory.key === 'tension' 
                                ? `<p class="text-4xl md:text-5xl font-serif text-purple-600 mb-8">${insightText}</p>`
                                : `<p class="text-2xl md:text-3xl text-gray-700 leading-relaxed">${insightText}</p>`
                            }
                        </div>
                        
                        <!-- Insight-specific guidance -->
                        <div class="mt-10 pt-8 border-t border-purple-100">
                            <p class="text-gray-500 text-sm italic">
                                ${isGentle 
                                    ? 'Take a moment with this perspective.'
                                    : 'Consider this systemic view.'
                                }
                            </p>
                        </div>
                    </div>
                </div>
                
                <!-- Navigation -->
                <div class="flex gap-4 justify-between mt-10">
                    ${this.currentInsightIndex > 0 
                        ? `<button onclick="sanctuaryTool.prevScreen()" class="luxury-button-secondary px-8 py-4 rounded-2xl font-medium text-gray-700">Previous Insight</button>`
                        : `<button onclick="sanctuaryTool.prevScreen()" class="luxury-button-secondary px-8 py-4 rounded-2xl font-medium text-gray-700">Back to Sanctuary</button>`
                    }
                    
                    <button onclick="sanctuaryTool.nextScreen()" class="luxury-button px-8 py-4 text-white font-medium rounded-2xl">
                        ${isLastInsight ? 'Continue to Your Artefact' : 'Next Insight'}
                    </button>
                </div>
                
                <!-- Progress dots -->
                <div class="flex justify-center gap-2 mt-10">
                    ${this.insightCategories.map((_, index) => `
                        <div class="w-2 h-2 rounded-full ${index === this.currentInsightIndex ? 'bg-purple-500' : 'bg-purple-200'}"></div>
                    `).join('')}
                </div>
            </div>
        </div>`;
    },

    // Keep the artefact screen (but update branding)
    renderArtefact() {
        if (!this.artefact) {
            this.artefact = this.generateArtefact(this.sessionData, this.insights);
        }
        
        return `
        <div class="fade-in py-12 px-4">
            <div class="max-w-2xl mx-auto">
                <div class="text-center mb-12">
                    <div class="inline-block px-6 py-2 glass-card rounded-full mb-6">
                        <span class="text-purple-400 text-sm font-medium">Step 6 of 7</span>
                    </div>
                    <h1 class="text-4xl md:text-5xl font-serif font-light mb-6 gradient-text">Your Sacred Artefact</h1>
                    <p class="text-gray-600 font-light text-lg">Wisdom to carry forward</p>
                </div>
                
                <!-- Visual Artefact -->
                <div class="relative mb-16">
                    <div class="glow-orb mx-auto absolute left-1/2 -translate-x-1/2 top-1/2 -translate-y-1/2 w-full max-w-md"></div>
                    
                    <div class="glass-card-dark rounded-3xl p-12 relative z-10">
                        <!-- Watermark -->
                        <div class="absolute top-6 right-6 text-purple-200 text-6xl opacity-30">
                            <i class="fas fa-feather"></i>
                        </div>
                        
                        <!-- Branding -->
                        <div class="text-center mb-12">
                            <div class="inline-block px-4 py-2 bg-white/30 rounded-full mb-8">
                                <span class="text-purple-600 text-xs font-medium tracking-widest">SACRED INTERVENTION</span>
                            </div>
                            <p class="text-purple-400 text-sm font-light mb-2">FOR YOUR FUTURE SELF</p>
                            <p class="text-gray-500 text-sm">${this.artefact.date}</p>
                        </div>
                        
                        <!-- Artefact Content -->
                        <div class="space-y-12">
                            <div class="text-center">
                                <div class="text-purple-400 text-sm font-medium mb-4 tracking-wider">ONE SENTENCE OF TRUTH</div>
                                <p class="text-3xl md:text-4xl font-serif text-gray-800 leading-tight italic">
                                    "${this.artefact.sentenceOfTruth}"
                                </p>
                            </div>
                            
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                                <div>
                                    <div class="text-purple-400 text-sm font-medium mb-3 tracking-wider">PATTERN TO LOOSEN</div>
                                    <p class="text-xl text-gray-700">${this.artefact.patternToRelease}</p>
                                </div>
                                
                                <div>
                                    <div class="text-purple-400 text-sm font-medium mb-3 tracking-wider">STRENGTH TO KEEP</div>
                                    <p class="text-xl text-gray-700">${this.artefact.strengthToKeep}</p>
                                </div>
                            </div>
                            
                            <div class="text-center pt-8 border-t border-purple-100">
                                <div class="text-purple-400 text-sm font-medium mb-4 tracking-wider">GENTLE COMMITMENT</div>
                                <p class="text-2xl font-serif text-gray-800">
                                    "${this.artefact.gentleCommitment}"
                                </p>
                            </div>
                        </div>
                        
                        <div class="mt-12 text-center">
                            <p class="text-gray-500 text-sm italic">
                                This artefact is yours. Screenshot it, write it down, or carry it in your heart.
                            </p>
                        </div>
                    </div>
                </div>
                
                <div class="text-center">
                    <div class="flex gap-4 justify-center flex-wrap">
                        <button onclick="sanctuaryTool.prevScreen()" 
                            class="luxury-button-secondary px-8 py-4 rounded-2xl font-medium text-gray-700">
                            Back to Insights
                        </button>
                        <button onclick="sanctuaryTool.nextScreen()" 
                            class="luxury-button px-10 py-4 text-white font-medium rounded-2xl">
                            Integration
                        </button>
                    </div>
                </div>
            </div>
        </div>`;
    },

    renderCompanionship() {
        return `
        <div class="fade-in min-h-screen flex flex-col justify-center items-center py-12 px-4">
            <div class="text-center max-w-2xl">
                <div class="relative mb-12">
                    <div class="glow-orb mx-auto absolute left-1/2 -translate-x-1/2"></div>
                    <div class="breathing-circle mx-auto rounded-full flex items-center justify-center relative z-10 glass-card-dark">
                        <i class="fas fa-hand-holding-heart text-5xl text-purple-200 floating"></i>
                    </div>
                </div>
                
                <h1 class="text-5xl font-serif font-light mb-12 gradient-text">Integration</h1>
                
                <div class="glass-card-dark p-12 rounded-3xl mb-10">
                    <p class="text-2xl md:text-3xl text-gray-200 font-serif italic leading-relaxed mb-10">
                        "What you named today matters.<br>
                        You don't have to carry it alone.<br>
                        Trust your own wisdom as it unfolds."
                    </p>
                    
                    <div class="text-center">
                        <div class="inline-flex items-center gap-4 text-purple-200">
                            <i class="fas fa-clock"></i>
                            <span class="font-light">90 seconds of presence</span>
                            <i class="fas fa-heart ml-4"></i>
                            <span class="font-light">No teaching, just witnessing</span>
                        </div>
                    </div>
                </div>
                
                <p class="text-gray-400 mb-12 max-w-md mx-auto font-light text-lg">
                    This is not instruction. This is companionship.<br>
                    You have already done the important work.
                </p>
                
                <button onclick="sanctuaryTool.nextScreen()" 
                    class="luxury-button px-12 py-4 text-white text-lg font-medium rounded-2xl">
                    Complete Your Journey
                </button>
            </div>
        </div>`;
    },

    renderReturn() {
        return `
        <div class="fade-in min-h-screen flex flex-col justify-center items-center py-12 px-4">
            <div class="text-center max-w-2xl">
                <div class="relative mb-12">
                    <div class="glow-orb mx-auto absolute left-1/2 -translate-x-1/2"></div>
                    <div class="w-40 h-40 mx-auto rounded-full flex items-center justify-center relative z-10 glass-card-dark">
                        <i class="fas fa-dove text-6xl text-purple-200 floating"></i>
                    </div>
                </div>
                
                <h1 class="text-5xl font-serif font-light mb-8 gradient-text">Journey Complete</h1>
                
                <div class="glass-card p-12 rounded-3xl mb-12">
                    <p class="text-2xl text-gray-700 mb-10 leading-relaxed font-light">
                        You have moved through naming to understanding,<br>
                        from insight to something sacred to carry.
                    </p>
                    
                    <div class="space-y-6 text-gray-600">
                        <div class="flex items-center">
                            <i class="fas fa-check-circle text-purple-400 mr-4"></i>
                            <span class="text-lg">You named what feels heavy</span>
                        </div>
                        <div class="flex items-center">
                            <i class="fas fa-check-circle text-purple-400 mr-4"></i>
                            <span class="text-lg">You paused in sanctuary</span>
                        </div>
                        <div class="flex items-center">
                            <i class="fas fa-check-circle text-purple-400 mr-4"></i>
                            <span class="text-lg">You received understanding</span>
                        </div>
                        <div class="flex items-center">
                            <i class="fas fa-check-circle text-purple-400 mr-4"></i>
                            <span class="text-lg">You created a sacred artefact</span>
                        </div>
                        <div class="flex items-center">
                            <i class="fas fa-check-circle text-purple-400 mr-4"></i>
                            <span class="text-lg">You felt integration</span>
                        </div>
                    </div>
                </div>
                
                <p class="text-gray-600 mb-12 max-w-lg mx-auto font-light text-lg">
                    Return when you're ready for your next reflection.<br>
                    Your wisdom is always welcome here.
                </p>
                
                <button onclick="sanctuaryTool.startOver()" 
                    class="luxury-button px-14 py-4 text-white text-lg font-medium rounded-2xl">
                    Return When Ready
                </button>
                
                <div class="mt-12 pt-8 border-t border-purple-100">
                    <p class="text-purple-400 text-sm font-light tracking-wider">FOR YOUR FUTURE SELF</p>
                    <p class="text-gray-500 text-xs mt-2">The work is complete. The integration continues.</p>
                </div>
            </div>
        </div>`;
    },

    startOver() {
        this.currentScreen = 'welcome';
        this.sessionData = {};
        this.insights = null;
        this.artefact = null;
        this.insightMode = 'gentle';
        this.currentInsightIndex = 0;
        this.render();
    },

    addCharacterCounters() {
        if (this.currentScreen === 'primary' || this.currentScreen === 'secondary') {
            setTimeout(() => {
                const textarea = this.currentScreen === 'primary' ? 
                    document.getElementById('primary') : document.getElementById('secondary');
                const charCount = this.currentScreen === 'primary' ? 
                    document.getElementById('charCount') : document.getElementById('charCount2');
                
                if (textarea && charCount) {
                    textarea.addEventListener('input', function() {
                        charCount.textContent = `${this.value.length}`;
                    });
                }
            }, 100);
        }
    },

    render() {
        const app = document.getElementById('app');
        switch(this.currentScreen) {
            case 'welcome':
                app.innerHTML = this.renderWelcome();
                break;
            case 'context':
                app.innerHTML = this.renderContext();
                break;
            case 'primary':
                app.innerHTML = this.renderPrimary();
                this.addCharacterCounters();
                break;
            case 'secondary':
                app.innerHTML = this.renderSecondary();
                this.addCharacterCounters();
                break;
            case 'sanctuary':
                app.innerHTML = this.renderSanctuary();
                break;
            case 'insights':
                app.innerHTML = this.renderInsights();
                break;
            case 'artefact':
                app.innerHTML = this.renderArtefact();
                break;
            case 'companionship':
                app.innerHTML = this.renderCompanionship();
                break;
            case 'return':
                app.innerHTML = this.renderReturn();
                break;
        }
    }
};

// Initialize
document.addEventListener('DOMContentLoaded', () => {
    sanctuaryTool.render();
});
</script>
</body>
</html>

